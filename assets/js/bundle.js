"use strict";
(self["webpackChunkfrontend_template"] = self["webpackChunkfrontend_template"] || []).push([["bundle"],{

/***/ "./src/js/main.js":
/*!************************!*\
  !*** ./src/js/main.js ***!
  \************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ Main; }
/* harmony export */ });
/* harmony import */ var picturefill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! picturefill */ "./node_modules/picturefill/dist/picturefill.js");
/* harmony import */ var picturefill__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(picturefill__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var smoothscroll_for_websites__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! smoothscroll-for-websites */ "./node_modules/smoothscroll-for-websites/SmoothScroll.js");
/* harmony import */ var smoothscroll_for_websites__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(smoothscroll_for_websites__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var swiper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! swiper */ "./node_modules/swiper/swiper.mjs");
/* harmony import */ var swiper_modules__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! swiper/modules */ "./node_modules/swiper/modules/index.mjs");
/* harmony import */ var _utils_ui_anchor_link__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/ui/anchor-link */ "./src/js/utils/ui/anchor-link.ts");
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}// js/tsどっちでもこんな感じで読めます
var Main=function Main(){_classCallCheck(this,Main);new _utils_ui_anchor_link__WEBPACK_IMPORTED_MODULE_4__["default"]();new Menu();new MvSlider();new Modal();new Effect();};/* eslint-disable */var MvSlider=function MvSlider(){new swiper__WEBPACK_IMPORTED_MODULE_2__["default"]('.mv-slider',{modules:[swiper_modules__WEBPACK_IMPORTED_MODULE_3__.Navigation,swiper_modules__WEBPACK_IMPORTED_MODULE_3__.Pagination],slidesPerView:1,loop:true,effect:'fade',speed:1000,navigation:{nextEl:'.mv .swiper-button-next',prevEl:'.mv .swiper-button-prev'},pagination:{el:'.swiper-pagination',clickable:true,// renderBullet: (index, className) => {
renderBullet:function renderBullet(index,className){return'<span class="'+className+'">0'+(index+1)+"</span>";// return `<span class=${className}>${index + 1}</span>`;
}}});};var Menu=function Menu(){var trigger=document.querySelector('#trigger');var wrap=document.querySelector('#header-nav');var Open=function Open(){trigger.classList.add('open');wrap.classList.add('active');document.body.style.overflow='hidden';};var Close=function Close(){trigger.classList.remove('open');wrap.classList.remove('active');document.body.style.overflow='';};trigger.addEventListener('click',function(){if(!trigger.classList.contains('open')){Open();}else{Close();}});};var Modal=function Modal(){var btn=document.querySelectorAll("[data-modal]");var modal=document.querySelector('.img_modal');function modalBoxup(btn){var modalId=btn.getAttribute('data-modal');var close=modal.querySelectorAll(".close");Array.prototype.forEach.call(close,function(el){el.addEventListener('click',function(e){e.preventDefault();modal.classList.remove('active');},false);});btn.addEventListener('click',function(el){var img=document.createElement('img');img.src=modalId;img.alt='';if(modal.classList.contains('active')){modal.classList.remove('active');}else{modal.classList.add('active');modal.querySelector('.modal_content').innerHTML='';modal.querySelector('.modal_content').append(img);}});}Array.prototype.forEach.call(btn,function(el){modalBoxup(el);});};var isPartiallyVisible=function isPartiallyVisible(el){var elementBoundary=el.getBoundingClientRect();var top=elementBoundary.top;var bottom=elementBoundary.bottom;var height=elementBoundary.height;return top+height>=0&&height+window.innerHeight>=bottom;};var Effect=function Effect(){var eles=document.querySelectorAll('.effect');var handling=function handling(){eles.forEach(function(el){if(isPartiallyVisible(el)){el.classList.add('active');}});};window.addEventListener('scroll',handling,false);handling();};var Loadding=function Loadding(){if(document.getElementById('loading')){document.body.style.overflow="hidden";onReady(function(){setVisible('#loading');});}else{setTimeout(function(){Effect();document.querySelector('header').classList.add('active');document.body.style="";},300);}};window.addEventListener('DOMContentLoaded',function(){new Main();});

/***/ }),

/***/ "./src/js/utils/ui/anchor-link.ts":
/*!****************************************!*\
  !*** ./src/js/utils/ui/anchor-link.ts ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ AnchorLink; }
/* harmony export */ });
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var gsap_all__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gsap/all */ "./node_modules/gsap/ScrollToPlugin.js");
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}gsap__WEBPACK_IMPORTED_MODULE_0__["default"].registerPlugin(gsap_all__WEBPACK_IMPORTED_MODULE_1__.ScrollToPlugin);/**
 * アンカーリンクスムーズスクロール
 * @export
 * @class AnchorLink
 * @param offset: fixのヘッダー等の場合合わせるピクセル、または高さを考慮する対象。
 * 例） new AnchorLink(), new AnchorLink(100), new AnchorLink('#header');
 * @param speed: スクロール速度 (ms)
 */var AnchorLink=function AnchorLink(_offset){var _this=this;var speed=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.6;_classCallCheck(this,AnchorLink);_defineProperty(this,"currentX",0);_defineProperty(this,"currentY",0);_defineProperty(this,"offsetY",0);_defineProperty(this,"speed",0);_defineProperty(this,"offsetTarget",null);_defineProperty(this,"go2DefaultTarget",function(target){var offset=_this.offsetY;if(_this.offsetTarget){offset=_this.offsetTarget.offsetHeight;}try{gsap__WEBPACK_IMPORTED_MODULE_0__["default"].killTweensOf(window);gsap__WEBPACK_IMPORTED_MODULE_0__["default"].set(window,{scrollTo:{x:target,y:target,offsetY:offset}});}catch(event){var targetPositionX=target.offsetLeft;var targetPositionY=target.offsetTop-offset;window.scrollTo(targetPositionX,targetPositionY);}});_defineProperty(this,"go2Anchor",function(e){var offset=_this.offsetY;if(_this.offsetTarget){offset=_this.offsetTarget.offsetHeight;}var scrollTarget=document.querySelector(e.currentTarget.getAttribute('href'));if(!scrollTarget)return;try{gsap__WEBPACK_IMPORTED_MODULE_0__["default"].killTweensOf(window);gsap__WEBPACK_IMPORTED_MODULE_0__["default"].to(window,_this.speed,{scrollTo:{x:scrollTarget,y:scrollTarget,autoKill:false,offsetY:offset},ease:'power1.inOut'});}catch(event){_this.currentX=window.scrollX;_this.currentY=window.scrollY;var targetPositionX=scrollTarget.offsetLeft;var targetPositionY=scrollTarget.offsetTop-offset;gsap__WEBPACK_IMPORTED_MODULE_0__["default"].killTweensOf(_this);gsap__WEBPACK_IMPORTED_MODULE_0__["default"].to(_this,_this.speed,{currentX:targetPositionX,currentY:targetPositionY,ease:'power1.inOut',onUpdate:function onUpdate(){window.scrollTo(_this.currentX,_this.currentY);}});}e.preventDefault();});// console.log('run');
this.speed=speed;if(typeof _offset==='number'){this.offsetY=_offset;}if(typeof _offset==='string'){this.offsetTarget=document.querySelector(_offset);}if(window.location.hash){var hashTarget=document.querySelector(window.location.hash);if(hashTarget){if('scrollRestoration'in window.history){window.history.scrollRestoration='manual';}this.go2DefaultTarget(hashTarget);}}var anchorLink=Array.prototype.slice.call(document.querySelectorAll('a[href^="#"]'));var _iterator=_createForOfIteratorHelper(anchorLink),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var elem=_step.value;var href=elem.getAttribute('href');if(href&&href.length>1){elem.addEventListener('click',this.go2Anchor,false);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}};

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["vendor"], function() { return __webpack_exec__("./node_modules/core-js/stable/index.js"), __webpack_exec__("./node_modules/regenerator-runtime/runtime.js"), __webpack_exec__("./node_modules/whatwg-fetch/fetch.js"), __webpack_exec__("./node_modules/intersection-observer/intersection-observer.js"), __webpack_exec__("./src/js/main.js"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQUwsQ0FBc0JILFVBQXRCLEVBQ0QsQ0FDRixDQUVELEdBQU1JLENBQUFBLFVBQXlCLENBQUc3RCxLQUFLLENBQUNDLFNBQU4sQ0FBZ0I2RCxLQUFoQixDQUFzQjNELElBQXRCLENBQTJCdkIsUUFBUSxDQUFDYyxnQkFBVCxDQUEwQixjQUExQixDQUEzQixDQUFsQyxDQXJCeUQseUNBc0J0Q21FLFVBdEJzQyxZQXNCekQsK0NBQStCLElBQXBCRSxDQUFBQSxJQUFvQixhQUM3QixHQUFNQyxDQUFBQSxJQUFtQixDQUFHRCxJQUFJLENBQUNqRSxZQUFMLENBQWtCLE1BQWxCLENBQTVCLENBQ0EsR0FBSWtFLElBQUksRUFBSUEsSUFBSSxDQUFDQyxNQUFMLENBQWMsQ0FBMUIsQ0FBNkIsQ0FDM0JGLElBQUksQ0FBQ3hFLGdCQUFMLENBQXNCLE9BQXRCLENBQStCLEtBQUsyRSxTQUFwQyxDQUErQyxLQUEvQyxFQUNELENBQ0YsQ0EzQndELHFEQTRCMUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC10ZW1wbGF0ZS8uL3NyYy9qcy9tYWluLmpzIiwid2VicGFjazovL2Zyb250ZW5kLXRlbXBsYXRlLy4vc3JjL2pzL3V0aWxzL3VpL2FuY2hvci1saW5rLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAncGljdHVyZWZpbGwnO1xyXG5pbXBvcnQgJ3Ntb290aHNjcm9sbC1mb3Itd2Vic2l0ZXMnO1xyXG5pbXBvcnQgU3dpcGVyIGZyb20gJ3N3aXBlcic7XHJcbmltcG9ydCB7IE5hdmlnYXRpb24sIFBhZ2luYXRpb24gfSBmcm9tICdzd2lwZXIvbW9kdWxlcyc7XHJcblxyXG4vLyBqcy90c+OBqeOBo+OBoeOBp+OCguOBk+OCk+OBquaEn+OBmOOBp+iqreOCgeOBvuOBmVxyXG5pbXBvcnQgQW5jaG9yTGluayBmcm9tICcuL3V0aWxzL3VpL2FuY2hvci1saW5rJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW4ge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgbmV3IEFuY2hvckxpbmsoKTtcclxuICAgIG5ldyBNZW51KCk7XHJcbiAgICBuZXcgTXZTbGlkZXIoKTtcclxuICAgIG5ldyBNb2RhbCgpO1xyXG4gICAgbmV3IEVmZmVjdCgpO1xyXG4gIH1cclxufVxyXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xyXG5jb25zdCBNdlNsaWRlciA9ICgpID0+IHtcclxuICBuZXcgU3dpcGVyKCcubXYtc2xpZGVyJywge1xyXG4gICAgbW9kdWxlczogW05hdmlnYXRpb24sIFBhZ2luYXRpb25dLFxyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBlZmZlY3Q6ICdmYWRlJyxcclxuICAgIHNwZWVkOiAxMDAwLFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6ICcubXYgLnN3aXBlci1idXR0b24tbmV4dCcsXHJcbiAgICAgIHByZXZFbDogJy5tdiAuc3dpcGVyLWJ1dHRvbi1wcmV2J1xyXG4gICAgfSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxyXG4gICAgICBjbGlja2FibGU6IHRydWUsXHJcbiAgICAgIC8vIHJlbmRlckJ1bGxldDogKGluZGV4LCBjbGFzc05hbWUpID0+IHtcclxuICAgICAgcmVuZGVyQnVsbGV0OiBmdW5jdGlvbiAoaW5kZXgsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHJldHVybiAnPHNwYW4gY2xhc3M9XCInICsgY2xhc3NOYW1lICsgJ1wiPjAnICsgKGluZGV4ICsgMSkgKyBcIjwvc3Bhbj5cIjtcclxuICAgICAgICAvLyByZXR1cm4gYDxzcGFuIGNsYXNzPSR7Y2xhc3NOYW1lfT4ke2luZGV4ICsgMX08L3NwYW4+YDtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IE1lbnUgPSAoKSA9PiB7XHJcbiAgY29uc3QgdHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0cmlnZ2VyJyk7XHJcbiAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWFkZXItbmF2Jyk7XHJcblxyXG4gIGNvbnN0IE9wZW4gPSAoKSA9PiB7XHJcbiAgICB0cmlnZ2VyLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcclxuICAgIHdyYXAuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgfTtcclxuICBjb25zdCBDbG9zZSA9ICgpID0+IHtcclxuICAgIHRyaWdnZXIuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG4gICAgd3JhcC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcclxuICB9O1xyXG5cclxuICB0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgaWYgKCF0cmlnZ2VyLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKSB7XHJcbiAgICAgIE9wZW4oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIENsb3NlKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBNb2RhbCA9ICgpID0+IHtcclxuICBsZXQgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLW1vZGFsXVwiKTtcclxuICBsZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW1nX21vZGFsJyk7XHJcblxyXG4gIGZ1bmN0aW9uIG1vZGFsQm94dXAgKGJ0bikge1xyXG4gICAgbGV0IG1vZGFsSWQgPSBidG4uZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsJyk7XHJcbiAgICBsZXQgY2xvc2UgPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNsb3NlXCIpO1xyXG5cclxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoY2xvc2UsIChlbCkgPT4ge1xyXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgIH0sIGZhbHNlKTtcclxuICAgIH0pXHJcblxyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGVsKSA9PntcclxuICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgIGltZy5zcmMgPSBtb2RhbElkO1xyXG4gICAgICBpbWcuYWx0ID0gJyc7XHJcbiAgICAgIGlmIChtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgbW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX2NvbnRlbnQnKS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfY29udGVudCcpLmFwcGVuZChpbWcpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYnRuLCAoZWwpID0+IHtcclxuICAgIG1vZGFsQm94dXAoZWwpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuXHJcbmNvbnN0IGlzUGFydGlhbGx5VmlzaWJsZSA9IChlbCkgPT4ge1xyXG4gIGxldCBlbGVtZW50Qm91bmRhcnkgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICBsZXQgdG9wID0gZWxlbWVudEJvdW5kYXJ5LnRvcDtcclxuICBsZXQgYm90dG9tID0gZWxlbWVudEJvdW5kYXJ5LmJvdHRvbTtcclxuICBsZXQgaGVpZ2h0ID0gZWxlbWVudEJvdW5kYXJ5LmhlaWdodDtcclxuICByZXR1cm4gKCh0b3AgKyBoZWlnaHQgPj0gMCkgJiYgKGhlaWdodCArIHdpbmRvdy5pbm5lckhlaWdodCA+PSBib3R0b20pKTtcclxufVxyXG5cclxuY29uc3QgRWZmZWN0ID0gKCkgPT4ge1xyXG4gIGNvbnN0IGVsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWZmZWN0Jyk7XHJcbiAgY29uc3QgaGFuZGxpbmcgPSAoKSA9PiB7XHJcbiAgICBlbGVzLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgIGlmIChpc1BhcnRpYWxseVZpc2libGUoZWwpKSB7XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxpbmcsIGZhbHNlKTtcclxuICBoYW5kbGluZygpO1xyXG59XHJcblxyXG5jb25zdCBMb2FkZGluZyA9ICgpID0+IHtcclxuICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmcnKSkge1xyXG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgb25SZWFkeShmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRWaXNpYmxlKCcjbG9hZGluZycpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgRWZmZWN0KCk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZSA9IFwiXCI7XHJcbiAgICAgIH0sIDMwMCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gIG5ldyBNYWluKCk7XHJcbn0pO1xyXG4iLCJpbXBvcnQgZ3NhcCBmcm9tICdnc2FwJztcclxuaW1wb3J0IHsgU2Nyb2xsVG9QbHVnaW4gfSBmcm9tICdnc2FwL2FsbCc7XHJcbmdzYXAucmVnaXN0ZXJQbHVnaW4oU2Nyb2xsVG9QbHVnaW4pO1xyXG5cclxuLyoqXHJcbiAqIOOCouODs+OCq+ODvOODquODs+OCr+OCueODoOODvOOCuuOCueOCr+ODreODvOODq1xyXG4gKiBAZXhwb3J0XHJcbiAqIEBjbGFzcyBBbmNob3JMaW5rXHJcbiAqIEBwYXJhbSBvZmZzZXQ6IGZpeOOBruODmOODg+ODgOODvOetieOBruWgtOWQiOWQiOOCj+OBm+OCi+ODlOOCr+OCu+ODq+OAgeOBvuOBn+OBr+mrmOOBleOCkuiAg+aFruOBmeOCi+WvvuixoeOAglxyXG4gKiDkvovvvIkgbmV3IEFuY2hvckxpbmsoKSwgbmV3IEFuY2hvckxpbmsoMTAwKSwgbmV3IEFuY2hvckxpbmsoJyNoZWFkZXInKTtcclxuICogQHBhcmFtIHNwZWVkOiDjgrnjgq/jg63jg7zjg6vpgJ/luqYgKG1zKVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5jaG9yTGluayB7XHJcbiAgcHJpdmF0ZSBjdXJyZW50WDogbnVtYmVyID0gMDtcclxuICBwcml2YXRlIGN1cnJlbnRZOiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgb2Zmc2V0WTogbnVtYmVyID0gMDtcclxuICBwcml2YXRlIHNwZWVkOiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgb2Zmc2V0VGFyZ2V0OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihvZmZzZXQ/OiBudW1iZXIgfCBzdHJpbmcsIHNwZWVkOiBudW1iZXIgPSAwLjYpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdydW4nKTtcclxuICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcclxuXHJcbiAgICBpZiAodHlwZW9mIG9mZnNldCA9PT0gJ251bWJlcicpIHtcclxuICAgICAgdGhpcy5vZmZzZXRZID0gb2Zmc2V0O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRoaXMub2Zmc2V0VGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCkge1xyXG4gICAgICBjb25zdCBoYXNoVGFyZ2V0OiBIVE1MRWxlbWVudCB8IG51bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxuICAgICAgaWYgKGhhc2hUYXJnZXQpIHtcclxuICAgICAgICBpZiAoJ3Njcm9sbFJlc3RvcmF0aW9uJyBpbiB3aW5kb3cuaGlzdG9yeSkge1xyXG4gICAgICAgICAgd2luZG93Lmhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSAnbWFudWFsJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nbzJEZWZhdWx0VGFyZ2V0KGhhc2hUYXJnZXQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYW5jaG9yTGluazogSFRNTEVsZW1lbnRbXSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaHJlZl49XCIjXCJdJykpO1xyXG4gICAgZm9yIChjb25zdCBlbGVtIG9mIGFuY2hvckxpbmspIHtcclxuICAgICAgY29uc3QgaHJlZjogc3RyaW5nIHwgbnVsbCA9IGVsZW0uZ2V0QXR0cmlidXRlKCdocmVmJyk7XHJcbiAgICAgIGlmIChocmVmICYmIGhyZWYubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdvMkFuY2hvciwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdvMkRlZmF1bHRUYXJnZXQgPSAodGFyZ2V0OiBIVE1MRWxlbWVudCk6IHZvaWQgPT4ge1xyXG4gICAgbGV0IG9mZnNldDogbnVtYmVyID0gdGhpcy5vZmZzZXRZO1xyXG4gICAgaWYgKHRoaXMub2Zmc2V0VGFyZ2V0KSB7XHJcbiAgICAgIG9mZnNldCA9IHRoaXMub2Zmc2V0VGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgIGdzYXAua2lsbFR3ZWVuc09mKHdpbmRvdyk7XHJcbiAgICAgIGdzYXAuc2V0KHdpbmRvdywgeyBzY3JvbGxUbzogeyB4OiB0YXJnZXQsIHk6IHRhcmdldCwgb2Zmc2V0WTogb2Zmc2V0IH0gfSk7XHJcbiAgICB9IGNhdGNoIChldmVudCkge1xyXG4gICAgICBjb25zdCB0YXJnZXRQb3NpdGlvblggPSB0YXJnZXQub2Zmc2V0TGVmdDtcclxuICAgICAgY29uc3QgdGFyZ2V0UG9zaXRpb25ZID0gdGFyZ2V0Lm9mZnNldFRvcCAtIG9mZnNldDtcclxuICAgICAgd2luZG93LnNjcm9sbFRvKHRhcmdldFBvc2l0aW9uWCwgdGFyZ2V0UG9zaXRpb25ZKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwcml2YXRlIGdvMkFuY2hvciA9IChlOiBhbnkpOiB2b2lkID0+IHtcclxuICAgIGxldCBvZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0WTtcclxuICAgIGlmICh0aGlzLm9mZnNldFRhcmdldCkge1xyXG4gICAgICBvZmZzZXQgPSB0aGlzLm9mZnNldFRhcmdldC5vZmZzZXRIZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzY3JvbGxUYXJnZXQ6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJykpO1xyXG4gICAgaWYgKCFzY3JvbGxUYXJnZXQpIHJldHVybjtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBnc2FwLmtpbGxUd2VlbnNPZih3aW5kb3cpO1xyXG4gICAgICBnc2FwLnRvKHdpbmRvdywgdGhpcy5zcGVlZCwge1xyXG4gICAgICAgIHNjcm9sbFRvOiB7IHg6IHNjcm9sbFRhcmdldCwgeTogc2Nyb2xsVGFyZ2V0LCBhdXRvS2lsbDogZmFsc2UsIG9mZnNldFk6IG9mZnNldCB9LFxyXG4gICAgICAgIGVhc2U6ICdwb3dlcjEuaW5PdXQnXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXZlbnQpIHtcclxuICAgICAgdGhpcy5jdXJyZW50WCA9IHdpbmRvdy5zY3JvbGxYO1xyXG4gICAgICB0aGlzLmN1cnJlbnRZID0gd2luZG93LnNjcm9sbFk7XHJcbiAgICAgIGNvbnN0IHRhcmdldFBvc2l0aW9uWCA9IHNjcm9sbFRhcmdldC5vZmZzZXRMZWZ0O1xyXG4gICAgICBjb25zdCB0YXJnZXRQb3NpdGlvblkgPSBzY3JvbGxUYXJnZXQub2Zmc2V0VG9wIC0gb2Zmc2V0O1xyXG5cclxuICAgICAgZ3NhcC5raWxsVHdlZW5zT2YodGhpcyk7XHJcbiAgICAgIGdzYXAudG8odGhpcywgdGhpcy5zcGVlZCwge1xyXG4gICAgICAgIGN1cnJlbnRYOiB0YXJnZXRQb3NpdGlvblgsXHJcbiAgICAgICAgY3VycmVudFk6IHRhcmdldFBvc2l0aW9uWSxcclxuICAgICAgICBlYXNlOiAncG93ZXIxLmluT3V0JyxcclxuICAgICAgICBvblVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKHRoaXMuY3VycmVudFgsIHRoaXMuY3VycmVudFkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiU3dpcGVyIiwiTmF2aWdhdGlvbiIsIlBhZ2luYXRpb24iLCJBbmNob3JMaW5rIiwiTWFpbiIsIk1lbnUiLCJNdlNsaWRlciIsIk1vZGFsIiwiRWZmZWN0IiwibW9kdWxlcyIsInNsaWRlc1BlclZpZXciLCJsb29wIiwiZWZmZWN0Iiwic3BlZWQiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwicGFnaW5hdGlvbiIsImVsIiwiY2xpY2thYmxlIiwicmVuZGVyQnVsbGV0IiwiaW5kZXgiLCJjbGFzc05hbWUiLCJ0cmlnZ2VyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwid3JhcCIsIk9wZW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJib2R5Iiwic3R5bGUiLCJvdmVyZmxvdyIsIkNsb3NlIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiYnRuIiwicXVlcnlTZWxlY3RvckFsbCIsIm1vZGFsIiwibW9kYWxCb3h1cCIsIm1vZGFsSWQiLCJnZXRBdHRyaWJ1dGUiLCJjbG9zZSIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJlIiwicHJldmVudERlZmF1bHQiLCJpbWciLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiYWx0IiwiaW5uZXJIVE1MIiwiYXBwZW5kIiwiaXNQYXJ0aWFsbHlWaXNpYmxlIiwiZWxlbWVudEJvdW5kYXJ5IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiYm90dG9tIiwiaGVpZ2h0Iiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJlbGVzIiwiaGFuZGxpbmciLCJMb2FkZGluZyIsImdldEVsZW1lbnRCeUlkIiwib25SZWFkeSIsInNldFZpc2libGUiLCJzZXRUaW1lb3V0IiwiZ3NhcCIsIlNjcm9sbFRvUGx1Z2luIiwicmVnaXN0ZXJQbHVnaW4iLCJvZmZzZXQiLCJ0YXJnZXQiLCJvZmZzZXRZIiwib2Zmc2V0VGFyZ2V0Iiwib2Zmc2V0SGVpZ2h0Iiwia2lsbFR3ZWVuc09mIiwic2V0Iiwic2Nyb2xsVG8iLCJ4IiwieSIsImV2ZW50IiwidGFyZ2V0UG9zaXRpb25YIiwib2Zmc2V0TGVmdCIsInRhcmdldFBvc2l0aW9uWSIsIm9mZnNldFRvcCIsInNjcm9sbFRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJ0byIsImF1dG9LaWxsIiwiZWFzZSIsImN1cnJlbnRYIiwic2Nyb2xsWCIsImN1cnJlbnRZIiwic2Nyb2xsWSIsIm9uVXBkYXRlIiwibG9jYXRpb24iLCJoYXNoIiwiaGFzaFRhcmdldCIsImhpc3RvcnkiLCJzY3JvbGxSZXN0b3JhdGlvbiIsImdvMkRlZmF1bHRUYXJnZXQiLCJhbmNob3JMaW5rIiwic2xpY2UiLCJlbGVtIiwiaHJlZiIsImxlbmd0aCIsImdvMkFuY2hvciJdLCJzb3VyY2VSb290IjoiIn0=